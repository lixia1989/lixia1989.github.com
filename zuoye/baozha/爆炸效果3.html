<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>翻转效果</title>
	<link rel="stylesheet" href="">
	<style>
		*{ margin:0; padding: 0;  }
		.box{ width: 700px; height: 400px;position: relative; margin:100px auto; background: url(img/1.jpg);}
		.box span{ position: absolute; transition:1s all cubic-bezier(1, 0.13, 0, 0.99);transform-style:preserve-3d; transform:perspective(800px) rotateY(0deg); background: url(img/0.jpg);}
		.box:hover span{ transform:perspective(800px);}
	</style>
	<script>
		function rnd(m,n){
			return parseInt(Math.random()*(m-n)+n);
		};
		window.onload=function(){
			var oBox = document.querySelector('.box');
			var R =4;
			var C =7;
			for(var i=0; i<R; i++){
				for(var j=0; j<C; j++){
					var oSpan = document.createElement('span');
					oSpan.innerHTML='<em></em><i></i>';
					var w = oBox.offsetWidth/C;
					var h = oBox.offsetHeight/R;
					oSpan.style.width=w+'px';
					oSpan.style.height=h+'px';
					oSpan.style.left=w*j+'px';
					oSpan.style.top=h*i+'px';
					
					oBox.appendChild(oSpan);
					oSpan.style.backgroundPosition=-w*j+'px -'+h*i+'px';
					oSpan.r=i;
					oSpan.c=j;
				}
			}
			var aSpan= oBox.children;
			var iNow = 0;
			var bReady=true;
			oBox.onclick=function(){
				if (!bReady) {return false};
				bReady=false;
				iNow++;

				for(var i=0; i<aSpan.length; i++){
					aSpan[i].style.transition='1s all cubic-bezier(1, 0.13, 0, 0.99)';
					var x=(aSpan[i].offsetLeft+aSpan[i].offsetWidth/2)-oBox.offsetWidth/2;
					var y=(aSpan[i].offsetTop+aSpan[i].offsetHeight/2)-oBox.offsetHeight/2;
					aSpan[i].style.transform='perspective(800px) translate('+x+'px,'+y+'px) rotateY('+rnd(0,180)+'deg) rotateX('+rnd(0,180)+'deg)';
					aSpan[i].style.opacity='0';
				}
			};
			aSpan[0].addEventListener('transitionend',function(){
				for(var i=0; i<aSpan.length; i++){
					aSpan[i].style.transform='';
					aSpan[i].style.transition='none';
					aSpan[i].style.opacity='1';
					aSpan[i].style.backgroundImage='url(img/'+iNow%3+'.jpg)';
					oBox.style.backgroundImage='url(img/'+(iNow+1)%3+'.jpg)';
				};
				bReady=true;
			},false);
			
		};
	</script>
</head>
<body>
	<div class="box">
		
	</div>
</body>
</html>